import{J as _}from"./jsoneditor-7fa27159.js";import{o as w,c as x,a as h,I as u}from"./@vue-5c45ea05.js";const S=(e,t)=>{const r=e.__vccOpts||e;for(const[d,s]of t)r[d]=s;return r};const C={editor:null,name:"json-editor-vue",internalChange:!1,props:{modelValue:Object,options:Object,currentMode:{type:String,default:"code"},modeList:{type:Array,default:()=>["tree","code","form","text","view"]},language:{type:String,default:"en"}},data(){return{json:this.modelValue,expandedModes:["tree","view","form"],isFullScreen:!1,hasLogo:!0,showFullScreen:!1}},watch:{modelValue:{immediate:!0,deep:!0,handler(e){this.internalChange||(this.setEditorContent(e),this.$nextTick(()=>{this.expandAll()}))}}},mounted(){this.init();const e=document.querySelector(".jsoneditor-menu .jsoneditor-poweredBy");this.hasLogo=e&&window.getComputedStyle(e).display!=="none",this.showFullScreen=!0},unmounted(){var e;(e=this.editor)==null||e.destroy(),this.editor=null},methods:{toggleFullScreen(){this.isFullScreen=!this.isFullScreen,this.$nextTick(()=>{const e=new Event("resize");window.dispatchEvent(e)})},init(){const{currentMode:e,modeList:t,options:r}=this,d=()=>{const n=o=>{this.json=o,this.$emit("update:modelValue",o),this.$emit("change",o),this.internalChange=!0,this.$nextTick(()=>{this.internalChange=!1})};if(!this.editor.getText()){n({});return}try{const o=this.editor.get();n(o)}catch{}},s=()=>{this.expandAll()},c=(n,i,o)=>{this.$emit("textSelectionChange",this.editor,n,i,o)},a=(n,i)=>{this.$emit("selectionChange",this.editor,n,i)},m=(n,i,o)=>{this.$emit("colorPicker",this.editor,n,i,o)},g=({target:n})=>{this.$emit("focus",this.editor,n)},p=async({target:n})=>{this.$emit("blur",this.editor,n)},f={...r,indentation:2,language:this.language,mode:e,modes:t,onChange:d,onModeChange:s,onTextSelectionChange:c,onSelectionChange:a,onColorPicker:m,onFocus:g,onBlur:p};this.editor=new _(this.$refs.jsonEditorVue,f,this.json)},expandAll(){var e,t;this.expandedModes.includes((e=this.editor)==null?void 0:e.getMode())&&((t=this.editor)==null||t.expandAll())},setEditorContent(e){var t;(t=this.editor)==null||t.set(e)}}},v={ref:"jsonEditorVue",class:"json-editor-vue"};function y(e,t,r,d,s,c){return w(),x("div",{class:u(["container",{"full-screen-container":s.isFullScreen}])},[h("div",v,null,512),h("div",{class:u(["full-screen",{show:s.showFullScreen,right:!s.hasLogo}]),onClick:t[0]||(t[0]=(...a)=>c.toggleFullScreen&&c.toggleFullScreen(...a))},null,2)],2)}const l=S(C,[["render",y],["__scopeId","data-v-1bb7781c"]]);l.install=function(t){t.component(l.name,l)};typeof window<"u"&&window.Vue&&window.Vue.component(l.name,l);export{l as J,S as _};
